{% extends 'base.html' %}

{% load static %}

{% block 'content' %}
<div class="pt-5">

  <div class='bg-dark rounded text-light pl-3'>
    <h1 class="d-flex justify-content-center pb-0 pt-3">Monitoramento dos Painéis de BI</h1>    
    <h6 class="d-flex  d-flex justify-content-center pt-0">
      <script language=javascript type="text/javascript">
        var now = new Date();
        document.write("Última atualização as "+now.getHours()+":"+now.getMinutes()+":"+now.getSeconds());
        console.log("LOG: Atualizando a página e fazendo requisição na API Painéis as "+now.getHours()+":"+now.getMinutes()+":"+now.getSeconds())
      </script>
      
    </h6>
    <table class="table bg-light table-hover rounded table-borderless align-self-center ">
      
      <thead class="thead bg-dark text-light">
        <tr>
          <th scope="col">Status</th>
          <th scope="col">Projeto</th>
          <th scope="col">Painel</th>
          <th scope="col">Sub-projeto</th>
          <th scope="col">Items</th>
        </tr>
      </thead>
      <tbody>
          {% for consulta  in consultar  %}
        <tr>
          {% if  consulta.reason %}
          <th class="bg-danger" scope="row"><i class="fas fa-ban"></i></th>
          <td class="bg-danger">{{consulta.projeto}}</td>
          <td class="bg-danger">{{consulta.painel}}</td>
          <td class="bg-danger">{{consulta.sub_projeto}}</td>
          <td class="bg-danger">{{consulta.reason}}</td>
         
          {% else %}
          
          {% if consulta.status %}
          <th scope="row"><i class="fas fa-cog fa-pulse"></i></th>
          {%else%}
          <th scope="row"><i class="fas fa-ban"></i></th>
          {% endif %}
          <td>{{consulta.projeto}}</td>
          <td>{{consulta.painel}}</td>
          <td>{{consulta.sub_projeto}}</td>
          <td>{{consulta.items}}</td>
          {% endif %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>

  {% endblock %}